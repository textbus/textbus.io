<h1>配置项</h1>
<p>通过配置，你可以定制编辑器的行为、功能、插件、格式等。自定义配置的方式如下</p><pre lang="TypeScript"><span style="width:2em" class="tb-code-line-number-bg"></span><span class="tb-code-content"><span class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{ createEditor }&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@textbus/editor'</span>;</span><span class="tb-code-line"><br></span><span class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;options = {</span><span class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-comment">// 这里是配置项</span></span><span class="tb-code-line">}</span><span class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;editor =&nbsp;<span class="tb-hl-function">createEditor</span>(document.<span class="tb-hl-function">getElementById</span>(<span class="tb-hl-string">'editor'</span>), options)</span></span><span class="tb-pre-lang">TypeScript</span></pre>
<p>通过 createEditor 函数创建编辑器时，你配置的字段会覆盖默认的配置，如你配置了 placeholder，则会覆盖掉默认的 placeholder，但其它的配置项还会使用默认值。</p>
<h2>组件 componentLoaders</h2>
<p>componentLoaders 为一个数组，可以配置编辑器支持的组件。TextBus 开发了常见的组件，如果你有自定义组件，你应该把你的组件和 TextBus 的组件一起放在这里。你也可以不配置 TextBus<br>默认的组件，则编辑器只会支持你自定义的组件。<br></p><pre lang="TypeScript"><span style="width:2em" class="tb-code-line-number-bg"></span><span class="tb-code-content"><span class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;options = {</span><span class="tb-code-line">&nbsp;&nbsp;componentLoaders: [</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-comment">// 组件列表</span></span><span class="tb-code-line">&nbsp;&nbsp;]</span><span class="tb-code-line">}</span></span><span class="tb-pre-lang">TypeScript</span></pre>
<p>查看<a target="_self" href="./component">组件开发</a>文档</p>
<h2>格式 formatLoaders</h2>
<p>formatLoaders 为一个数组，可以配置编辑器支持的格式。TextBus 已开发了常见的格式，如果你有自定义格式，你应该把你的格式和 TextBus 的格式一起放在这里。</p>
<p>你也可以不配置 TextBus 默认的格式，则编辑器只会支持你自定义的格式。</p><pre lang="TypeScript"><span style="width:2em" class="tb-code-line-number-bg"></span><span class="tb-code-content"><span class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;options = {</span><span class="tb-code-line">&nbsp;&nbsp;formatLoaders: [</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-comment">// 格式列表</span></span><span class="tb-code-line">&nbsp;&nbsp;]</span><span class="tb-code-line">}</span></span><span class="tb-pre-lang">TypeScript</span></pre>
<p>查看<a target="_self" href="./formatter">格式开发</a>文档</p>
<h2>默认内容 content</h2>
<p>在创建编辑器时，你可以设置编辑器的默认内容。内容可以为一个 HTML 字符串，或 TextBus 指定的 JSON 数据。</p><pre lang="TypeScript"><span style="width:2em" class="tb-code-line-number-bg"></span><span class="tb-code-content"><span class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;options = {</span><span class="tb-code-line">&nbsp;&nbsp;content:&nbsp;<span class="tb-hl-string">'&lt;p&gt;你好，我是 TextBus 富文本编辑器！&lt;/p&gt;'</span></span><span class="tb-code-line">}</span></span><span class="tb-pre-lang">TypeScript</span></pre>
<h2>样式表 styleSheets</h2>
<p>styleSheets 为一组 css 样式表，可以配置编辑器内文档的默认样式。在调用 getContents 方法时，这里的样式表会返回在结果中。</p><pre lang="TypeScript"><span style="width:2em" class="tb-code-line-number-bg"></span><span class="tb-code-content"><span class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;options = {</span><span class="tb-code-line">&nbsp;&nbsp;styleSheets: [</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-string">'body { background: #ccc; color: #333}'</span></span><span class="tb-code-line">&nbsp;&nbsp;]</span><span class="tb-code-line">}</span></span><span class="tb-pre-lang">TypeScript</span></pre>
<h2>编辑时样式表 editingStyleSheets</h2>
<p>editingStyleSheets 为一组 css 样式表，可以配置编辑器内文档的在编辑时的默认样式。在调用 getContents 方法时，这里的样式表不会返回在结果中。</p><pre lang="TypeScript"><span style="width:2em" class="tb-code-line-number-bg"></span><span class="tb-code-content"><span class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;options = {</span><span class="tb-code-line">&nbsp;&nbsp;styleSheets: [</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-string">'p { font-size: 14px}'</span></span><span class="tb-code-line">&nbsp;&nbsp;]</span><span class="tb-code-line">}</span></span><span class="tb-pre-lang">TypeScript</span></pre>
<h2>插件 plugins</h2>
<p>plugins 为一个数组，可以配置编辑器的插件。如果你有自定义的插件，你应该把你的插件和 TextBus 的插件一起放在这里。你也可以不配置 TextBus 默认的插件，则编辑器只会支持你自定义的插件。</p><pre lang="TypeScript"><span style="width:2em" class="tb-code-line-number-bg"></span><span class="tb-code-content"><span class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;options = {</span><span class="tb-code-line">&nbsp;&nbsp;plugins: [</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-comment">// 你的插件</span></span><span class="tb-code-line">&nbsp;&nbsp;]</span><span class="tb-code-line">}</span></span><span class="tb-pre-lang">TypeScript</span></pre>
<p>查看<a target="_self" href="./plugin">插件开发</a>文档</p>
<h2>提供者 providers</h2>
<p>providers 为一个数组，专为高级开发提供的配置入口，providers 里面的类，可以使用 TextBus 内核中的依赖注入能力。方便扩展高级应用，一般使用者可以忽略。</p>
<h2>主题 theme</h2>
<p>配置主题，可以配置 TextBus 的用户界面。</p><pre lang="TypeScript"><span style="width:2em" class="tb-code-line-number-bg"></span><span class="tb-code-content"><span class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;options = {</span><span class="tb-code-line">&nbsp;&nbsp;theme:&nbsp;<span class="tb-hl-string">'dark'</span></span><span class="tb-code-line">}</span></span><span class="tb-pre-lang">TypeScript</span></pre>
<h2>国际化 i18n</h2>
<p>i18n 为一个 JSON 对象，可以配置 TextBus 中的文案文本。TextBus 默认为中文，同时提供了英语配置。你也可以根据自己的需要，改为其它语言。</p><pre lang="TypeScript"><span style="width:2em" class="tb-code-line-number-bg"></span><span class="tb-code-content"><span class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{ i18n_en_US }&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@textbus/editor'</span></span><span class="tb-code-line"><br></span><span class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;options = {</span><span class="tb-code-line">&nbsp;&nbsp;i18n: i18n_en_US</span><span class="tb-code-line">}</span></span><span class="tb-pre-lang">TypeScript</span></pre>
<h2>提示文字 placeholder</h2>
<p>配置编辑器内容为空时的提示文字。</p><pre lang="TypeScript"><span style="width:2em" class="tb-code-line-number-bg"></span><span class="tb-code-content"><span class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;options = {</span><span class="tb-code-line">&nbsp;&nbsp;placeholder:&nbsp;<span class="tb-hl-string">'请输入内容...'</span></span><span class="tb-code-line">}</span></span><span class="tb-pre-lang">TypeScript</span></pre>
<h2>文件上传 uploader</h2>
<p>uploader 为一个函数，TextBus 未实现任何与 ajax 相关的功能。如果你需要资源上传，则必须配置此项，当需要文件上传时，TextBus 会调用此函数，并根据返回值做相应处理。</p><pre lang="TypeScript"><span style="width:2em" class="tb-code-line-number-bg"></span><span class="tb-code-content"><span class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;options = {</span><span class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">uploader</span>(uploadConfig) {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-comment">// 你的上传实现</span></span><span class="tb-code-line">&nbsp;&nbsp;}</span><span class="tb-code-line">}</span></span><span class="tb-pre-lang">TypeScript</span></pre>
<p>其中 uploadConfig 为如下结构</p><pre lang="TypeScript"><span style="width:2em" class="tb-code-line-number-bg"></span><span class="tb-code-content"><span class="tb-code-line"><span class="tb-hl-keyword">export</span>&nbsp;<span class="tb-hl-keyword">interface</span>&nbsp;<span class="tb-hl-class-name">UploadConfig</span>&nbsp;{</span><span class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-comment">/** 上传类型 */</span></span><span class="tb-code-line"><span class="tb-hl-comment">&nbsp;&nbsp;uploadType: string</span></span><span class="tb-code-line"><span class="tb-hl-comment">&nbsp;&nbsp;/** 当前值 */</span></span><span class="tb-code-line"><span class="tb-hl-comment">&nbsp;&nbsp;currentValue: string</span></span><span class="tb-code-line"><span class="tb-hl-comment">&nbsp;&nbsp;/** 是否支持返回多个结果 */</span></span><span class="tb-code-line"><span class="tb-hl-comment">&nbsp;&nbsp;multiple: boolean</span></span><span class="tb-code-line"><span class="tb-hl-comment">}</span></span></span><span class="tb-pre-lang">TypeScript</span></pre>
<p>如果 multiple 为&nbsp;<code>false</code>，则表示你只能返回一个 url 字符串，或返回一个&nbsp;<code>Promise&lt;string&gt;</code>，否则表示你可以返回多张图片的 url，或<br>&nbsp;&nbsp;<code>Promise&lt;string[]&gt;</code>。</p>
<p>下面以 jQuery 上传单张图片为例</p><pre lang="TypeScript"><span style="width:2em" class="tb-code-line-number-bg"></span><span class="tb-code-content"><span class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;options = {</span><span class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">uploader</span>(uploadConfig) {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">switch</span>&nbsp;(uploadConfig.uploadType) {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">case</span>&nbsp;<span class="tb-hl-string">'image'</span>:</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">var</span>&nbsp;fileInput = document.<span class="tb-hl-function">createElement</span>(<span class="tb-hl-string">'input'</span>);</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fileInput.<span class="tb-hl-function">setAttribute</span>(<span class="tb-hl-string">'type'</span>,&nbsp;<span class="tb-hl-string">'file'</span>);</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fileInput.<span class="tb-hl-function">setAttribute</span>(<span class="tb-hl-string">'accept'</span>, 'image/png, image/gif, image/jpeg,</span><span class="tb-code-line">&nbsp;&nbsp;image/bmp, image/x-icon');</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fileInput.multiple = uploadConfig.multiple</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fileInput.style.cssText = 'position: absolute; left: -9999px; top:</span><span class="tb-code-line">&nbsp;&nbsp;-9999px; opacity:&nbsp;<span class="tb-hl-number">0</span>';</span><span class="tb-code-line"><br></span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">var</span>&nbsp;promise =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-builtin">Promise</span>(<span class="tb-hl-keyword">function</span>&nbsp;(resolve) {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fileInput.<span class="tb-hl-function">addEventListener</span>(<span class="tb-hl-string">'change'</span>,&nbsp;<span class="tb-hl-keyword">function</span>&nbsp;(event) {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">var</span>&nbsp;form =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">FormData</span>();</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">var</span>&nbsp;files = event.target.files;</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">for</span>&nbsp;(<span class="tb-hl-keyword">var</span>&nbsp;i =&nbsp;<span class="tb-hl-number">0</span>; i &lt; files.length; i++) {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-comment">// 这里的 file 字符串为后台接收 FormData的字段名，可以改成自己需要的名字</span></span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form.<span class="tb-hl-function">append</span>(<span class="tb-hl-string">'file'</span>, files[i]);</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.body.<span class="tb-hl-function">removeChild</span>(fileInput);</span><span class="tb-code-line"><br></span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-comment">// 下面以 jQuery 为例实现上传</span></span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$.<span class="tb-hl-function">ajax</span>({</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;<span class="tb-hl-string">"post"</span>,</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;<span class="tb-hl-string">'/api/upload'</span>,</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data: form,</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataType:&nbsp;<span class="tb-hl-string">'json'</span>,</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;processData:&nbsp;<span class="tb-hl-boolean">false</span>,</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;success:&nbsp;<span class="tb-hl-keyword">function</span>&nbsp;(response) {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">if</span>&nbsp;(response.success) {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-function">resolve</span>(response.imageUrl)</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error:&nbsp;<span class="tb-hl-keyword">function</span>&nbsp;() {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-builtin">console</span>.<span class="tb-hl-function">log</span>(<span class="tb-hl-string">'上传失败！'</span>);</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</span><span class="tb-code-line"><br></span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.body.<span class="tb-hl-function">appendChild</span>(fileInput);</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fileInput.<span class="tb-hl-function">click</span>();</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;promise;</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</span><span class="tb-code-line">&nbsp;&nbsp;}</span><span class="tb-code-line">}</span></span><span class="tb-pre-lang">TypeScript</span></pre>
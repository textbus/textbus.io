<h1>插槽集</h1>
<p>什么是插槽集？</p>
<p>插槽集类似一个数组，一个组件可能包含一个或多个插槽，且插槽本身也会随着编辑增加或删除，Slots 就于用于管理这些插槽的增删，并记录相应操作，来达到协作或历史记录功能的。</p>
<p>通过 useSlots 或组件实例可以访问到组件的插槽集。</p><pre lang="TypeScript" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-comment">// 在组件内部创建并访问插槽集</span></div><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;yourComponent =&nbsp;<span class="tb-hl-function">defineComponent</span>({</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">setup</span>() {</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;slots =&nbsp;<span class="tb-hl-function">useSlots</span>([...])</div><div class="tb-code-line">&nbsp;&nbsp;}</div><div class="tb-code-line">})</div><div class="tb-code-line"><br></div><div class="tb-code-line"><span class="tb-hl-comment">// 在组件外部访问组件的插槽集</span></div><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;slots = componentInstance.slots</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h2>属性</h2>
<h3>host</h3>
<p>当前插槽集所属的组件。</p>
<h3>length</h3>
<p>子插槽的个数。</p>
<h3>first</h3>
<p>第一个子插槽。当插槽集为空时，返回 undefined。</p>
<h3>last</h3>
<p>最后一个子插槽。当插槽集为空时，返回 undefined。</p>
<h3>index</h3>
<p>插槽集的下标。</p>
<h2>方法</h2>
<h3>indexOf()</h3>
<p>查询指定插槽在插槽集中的索引。当未找到时，返回 -1。</p><pre lang="TypeScript" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;index = slots.<span class="tb-hl-function">indexOf</span>(slot)</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>remove()</h3>
<p>在插槽集中删除指定插槽。</p><pre lang="TypeScript" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line">slots.<span class="tb-hl-function">remove</span>(slot)</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>insertAfter()</h3>
<p>把新插槽插入到已有插槽的后面。</p><pre lang="TypeScript" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;newSlot =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">Slot</span>([])</div><div class="tb-code-line">slots.<span class="tb-hl-function">insertAfter</span>(newSlot, refSlot)</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>insertBefore()</h3>
<p>把新插槽插入到已有插槽前面。</p><pre lang="TypeScript" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;newSlot =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">Slot</span>([])</div><div class="tb-code-line">slots.<span class="tb-hl-function">insertBefore</span>(newSlot, refSlot)</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>insertByIndex()</h3>
<p>把新插槽插入到指定下标位置。</p><pre lang="TypeScript" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;newSlot =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">Slot</span>([])</div><div class="tb-code-line">slots.<span class="tb-hl-function">insertByIndex</span>(newSlot,&nbsp;<span class="tb-hl-number">3</span>)</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>push()</h3>
<p>把新插槽添加到插槽集的未尾。</p><pre lang="TypeScript" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;newSlot =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">Slot</span>([])</div><div class="tb-code-line">slots.<span class="tb-hl-function">push</span>(newSlot)</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>pop()</h3>
<p>删除插槽集最后一个插槽，并返回删除的插槽，当插槽集为空时，返回 null。</p><pre lang="TypeScript" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;deletedSlot = slots.<span class="tb-hl-function">pop</span>()</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>shift()</h3>
<p>删除插槽集第一个插槽，并返回删除的插槽，当插槽集为空时，返回 null。</p><pre lang="TypeScript" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;deletedSlot = slots.<span class="tb-hl-function">shift</span>()</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>unshift()</h3>
<p>把新插槽插入到插槽集的开始。</p><pre lang="TypeScript" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;newSlot =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">Slot</span>([])</div><div class="tb-code-line">slots.<span class="tb-hl-function">unshift</span>(newSlot)</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>get()</h3>
<p>根据下标获取子插槽。当传入下标位置没有插槽时，返回 null。</p><pre lang="TypeScript" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;slot = slots.<span class="tb-hl-function">get</span>(<span class="tb-hl-number">0</span>)</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>replace()</h3>
<p>替换子插槽。</p><pre lang="TypeScript" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;newSlot =&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">Slot</span>([])</div><div class="tb-code-line">slots.<span class="tb-hl-function">replace</span>(oldSlot, newSlot)</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>toJSON()</h3>
<p>把插槽集转换为 JSON 格式。</p>
<h3>toArray()</h3>
<p>把插槽集转换为数组。</p>
<h3>clean()</h3>
<p>清空插槽集。</p>
<h3>insert()</h3>
<p>根据插槽集下标位置，插入新的插槽。</p><pre lang="TypeScript" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line">slots.<span class="tb-hl-function">insert</span>(slot)</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>retain()</h3>
<p>修改插槽集下标位置。</p><pre lang="TypeScript" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line">slots.<span class="tb-hl-function">retain</span>(<span class="tb-hl-number">2</span>)</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>delete()</h3>
<p>根据插槽集下标位置，向后删除指定个数的插槽。</p><pre lang="TypeScript" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line">slots.<span class="tb-hl-function">delete</span>(<span class="tb-hl-number">2</span>)</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>cut()</h3>
<p>剪切插槽集，并返回一个插槽数组。</p><pre lang="TypeScript" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;slotArr = slots.<span class="tb-hl-function">cut</span>(<span class="tb-hl-number">0</span>,&nbsp;<span class="tb-hl-number">3</span>)</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>slice()</h3>
<p>从插槽集中获取部分插槽。</p><pre lang="TypeScript" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;slotArr = slots.<span class="tb-hl-function">slice</span>(<span class="tb-hl-number">2</span>,&nbsp;<span class="tb-hl-number">4</span>)</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>has()</h3>
<p>插槽集中是否包含指定插槽。</p><pre lang="TypeScript" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;isContainSlot = slots.<span class="tb-hl-function">has</span>(slot)</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<h3>toString()</h3>
<p>把插槽集转换为字符串。</p>
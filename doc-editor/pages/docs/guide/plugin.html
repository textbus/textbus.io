<h1>插件</h1>
<p>什么是插件？</p>
<p>在大多数情况下，我们不需要开发插件，因为组件有相对完善的功能，已经能完成我们的大部分工作。插件只是作为编辑器额外功能补充而存在。如工具条，编辑器本身并不一定需要一个工具条，但工具条能帮我们更简单的使用特定的功能。事实上，在 Textbus 内部，整个工具条，也是以插件的形式而存在的。</p>
<p>和其它编辑器不同的是，在 Textbus 中，工具条作为一个插件，工具条上面的工具是对工具条这个插件的扩展。在其它编辑器中，工作条是作为一个基础库出现的，而把工具条中的的工具叫做插件。</p>
<h2>第一个插件</h2>
<p>在 Textbus 中，插件只是一个带有 setup 方法的对象，Textbus 会在初始化时调用这个方法，并传入 injector 对象，通过 injector 对象，你可以获取到 Textbus 内部所有类的实例。</p>
<p>如我们要实现一个兼听数据变化的插件</p><pre lang="TypeScript" theme="dark" class="tb-pre"><div class="tb-pre-content"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{ Plugin }&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@textbus/core'</span></div><div class="tb-code-line"><br></div><div class="tb-code-line"><span class="tb-hl-keyword">class</span>&nbsp;<span class="tb-hl-class-name">MyPlugin</span>&nbsp;<span class="tb-hl-keyword">implements</span>&nbsp;<span class="tb-hl-class-name">Plugin</span>&nbsp;{</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">setup</span>(injector) {</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;editor = injector.<span class="tb-hl-function">get</span>(Editor)</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;editor.onChange.<span class="tb-hl-function">subscribe</span>(() =&gt; {</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-builtin">console</span>.<span class="tb-hl-function">log</span>(<span class="tb-hl-string">'数据变化了！'</span>)</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;})</div><div class="tb-code-line">&nbsp;&nbsp;},</div><div class="tb-code-line"><br></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-comment">// 可选，编辑器销毁时调用</span></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">destroy</span>() {</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-builtin">console</span>.<span class="tb-hl-function">log</span>(<span class="tb-hl-string">'destroyed！'</span>)</div><div class="tb-code-line">&nbsp;&nbsp;}</div><div class="tb-code-line">}</div><div class="tb-code-line"><br></div><div class="tb-code-line"><span class="tb-hl-keyword">const</span>&nbsp;editor=&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">Viewer</span>(rootComponent, rootComponentLoader, {</div><div class="tb-code-line">&nbsp;&nbsp;plugins: [</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;() =&gt;&nbsp;<span class="tb-hl-keyword">new</span>&nbsp;<span class="tb-hl-class-name">MyPlugin</span>()</div><div class="tb-code-line">&nbsp;&nbsp;]</div><div class="tb-code-line">})</div><div class="tb-code-line">editor.<span class="tb-hl-function">mount</span>(<span class="tb-hl-string">'#editor'</span>)</div></div><span class="tb-pre-lang">TypeScript</span></div></pre>
<p><br></p>
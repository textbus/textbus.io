<h1>在框架中使用</h1>
<p>Textbus 不依赖前端的某个框架，意味着 Textbus 可以很轻松的在任意框架或项目中使用。如 Angular、Vue、React，或者是 jQuery 这样的传统项目。</p>
<h2>在 Vue 中使用</h2>
<p>vue2，请注意一定要在 mounted 生命周期内初始化，以确保可以获取到正确的 DOM 节点。</p><pre lang="Jsx" theme="null" class="tb-pre"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line">&lt;<span class="tb-hl-tag">template</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&lt;<span class="tb-hl-tag">div&nbsp;</span><span class="tb-hl-attr-name">ref</span>="<span class="tb-hl-attr-value">editorContainer</span>"&gt;&lt;/<span class="tb-hl-tag">div</span>&gt;</div><div class="tb-code-line">&lt;/<span class="tb-hl-tag">template</span>&gt;</div><div class="tb-code-line">&lt;<span class="tb-hl-tag">script</span>&gt;</div><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{ createEditor }&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@textbus/editor'</span>;</div><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;<span class="tb-hl-string">'@textbus/editor/bundles/textbus.min.css'</span>;</div><div class="tb-code-line"><br></div><div class="tb-code-line"><span class="tb-hl-keyword">export</span>&nbsp;<span class="tb-hl-keyword">default</span>&nbsp;{</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">mounted</span>() {</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;editor =&nbsp;<span class="tb-hl-function">createEditor</span>();</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;editor.<span class="tb-hl-function">mount</span>(<span class="tb-hl-keyword">this</span>.$refs.editorContainer)</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;editor.onChange.<span class="tb-hl-function">subscribe</span>(() =&gt; {</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.<span class="tb-hl-function">log</span>(editor.<span class="tb-hl-function">getContents</span>());</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div><div class="tb-code-line">&nbsp;&nbsp;}</div><div class="tb-code-line">}</div><div class="tb-code-line">&lt;/<span class="tb-hl-tag">script</span>&gt;</div></div><span class="tb-pre-lang">Jsx</span></pre>
<p>Vue3，请注意一定要在 onMounted 生命周期内初始化，以确保可以获取到正确的 DOM 节点。</p><pre lang="Jsx" theme="null" class="tb-pre"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line">&lt;<span class="tb-hl-tag">template</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;&lt;<span class="tb-hl-tag">div&nbsp;</span><span class="tb-hl-attr-name">ref</span>="<span class="tb-hl-attr-value">editorContainer</span>"&gt;&lt;/<span class="tb-hl-tag">div</span>&gt;</div><div class="tb-code-line">&lt;/<span class="tb-hl-tag">template</span>&gt;</div><div class="tb-code-line">&lt;<span class="tb-hl-tag">script</span>&gt;</div><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{ defineComponent, ref, onMounted }&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'vue'</span></div><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{ createEditor }&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@textbus/editor'</span>;</div><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;<span class="tb-hl-string">'@textbus/editor/bundles/textbus.min.css'</span>;</div><div class="tb-code-line"><br></div><div class="tb-code-line"><span class="tb-hl-keyword">export</span>&nbsp;<span class="tb-hl-keyword">default</span>&nbsp;<span class="tb-hl-function">defineComponent</span>({</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">setup</span>() {</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;editorContainer =&nbsp;<span class="tb-hl-function">ref</span>();</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-function">onMounted</span>(() =&gt; {</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;editor =&nbsp;<span class="tb-hl-function">createEditor</span>();</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;editor.<span class="tb-hl-function">mount</span>(editorContainer.value)</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;editor.onChange.<span class="tb-hl-function">subscribe</span>(() =&gt; {</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.<span class="tb-hl-function">log</span>(editor.<span class="tb-hl-function">getContents</span>());</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;})</div><div class="tb-code-line"><br></div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;{</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;editorContainer</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="tb-code-line">&nbsp;&nbsp;}</div><div class="tb-code-line">})</div><div class="tb-code-line">&lt;/<span class="tb-hl-tag">script</span>&gt;</div></div><span class="tb-pre-lang">Jsx</span></pre>
<h2>在 React 中使用</h2>
<p>传统风格，请确保在 componentDidMount 生命周期内初始化，以确保可以获取到正确的 DOM 节点。</p><pre lang="Jsx" theme="null" class="tb-pre"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;React&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'react'</span>;</div><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{ createEditor }&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@textbus/editor'</span>;</div><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;<span class="tb-hl-string">'@textbus/editor/bundles/textbus.min.css'</span>;</div><div class="tb-code-line"><br></div><div class="tb-code-line"><span class="tb-hl-keyword">export</span>&nbsp;<span class="tb-hl-keyword">class</span>&nbsp;<span class="tb-hl-class-name">EditorComponent</span>&nbsp;<span class="tb-hl-keyword">extends</span>&nbsp;<span class="tb-hl-class-name">React</span>.<span class="tb-hl-class-name">Component</span>&nbsp;{</div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">componentDidMount</span>() {</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;editor =&nbsp;<span class="tb-hl-function">createEditor</span>();</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;editor.<span class="tb-hl-function">mount</span>(<span class="tb-hl-keyword">this</span>.refs.editorContainer)</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;editor.onChange.<span class="tb-hl-function">subscribe</span>(() =&gt; {</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.<span class="tb-hl-function">log</span>(editor.<span class="tb-hl-function">getContents</span>());</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div><div class="tb-code-line">&nbsp;&nbsp;}</div><div class="tb-code-line"><br></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">render</span>() {</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;(&lt;<span class="tb-hl-tag">div&nbsp;</span><span class="tb-hl-attr-name">ref</span>="<span class="tb-hl-attr-value">editorContainer</span>"/&gt;);</div><div class="tb-code-line">&nbsp;&nbsp;}</div><div class="tb-code-line">}</div></div><span class="tb-pre-lang">Jsx</span></pre>
<p>hooks 风格，请在 useEffect 内初始化，以确保能够获取到正确的 DOM 节点。</p><pre lang="Jsx" theme="null" class="tb-pre"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{ useRef, useEffect }&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'react'</span>;</div><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{ createEditor }&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@textbus/editor'</span>;</div><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;<span class="tb-hl-string">'@textbus/editor/bundles/textbus.min.css'</span>;</div><div class="tb-code-line"><br></div><div class="tb-code-line"><span class="tb-hl-keyword">export</span>&nbsp;<span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">EditorDemo</span>() {</div><div class="tb-code-line"><br></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;editorContainer =&nbsp;<span class="tb-hl-function">useRef</span>()</div><div class="tb-code-line"><br></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">useEffect</span>(() =&gt; {</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;editor =&nbsp;<span class="tb-hl-function">createEditor</span>();</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;editor.<span class="tb-hl-function">mount</span>(editorContainer.current)</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;editor.onChange.<span class="tb-hl-function">subscribe</span>(() =&gt; {</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.<span class="tb-hl-function">log</span>(editor.<span class="tb-hl-function">getContents</span>());</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div><div class="tb-code-line">&nbsp;&nbsp;})</div><div class="tb-code-line"><br></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;(</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class="tb-hl-tag">div&nbsp;</span><span class="tb-hl-attr-name">ref</span>={editorContainer}&gt;&lt;/<span class="tb-hl-tag">div</span>&gt;</div><div class="tb-code-line">&nbsp;&nbsp;)</div><div class="tb-code-line">}</div></div><span class="tb-pre-lang">Jsx</span></pre>
<h2>在 Angular 中使用</h2>
<p>请在 ngOnInit 生命周期内初始化，以确保能获取到正确的 DOM 节点。</p><pre lang="TypeScript" theme="null" class="tb-pre"><div style="width:2.5em" class="tb-code-line-number-bg"></div><div class="tb-code-content"><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{ Component, ViewChild, ElementRef, OnInit }&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@angular/core'</span>;</div><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{ createEditor }&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@textbus/editor'</span>;</div><div class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;<span class="tb-hl-string">'@textbus/editor/bundles/textbus.min.css'</span>;</div><div class="tb-code-line"><br></div><div class="tb-code-line">@<span class="tb-hl-function">Component</span>({</div><div class="tb-code-line">&nbsp;&nbsp;template: `</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&lt;div #editorContainer&gt;&lt;/div&gt;`</div><div class="tb-code-line">})</div><div class="tb-code-line"><span class="tb-hl-keyword">export</span>&nbsp;<span class="tb-hl-keyword">class</span>&nbsp;<span class="tb-hl-class-name">EditorComponent</span>&nbsp;<span class="tb-hl-keyword">implements</span>&nbsp;<span class="tb-hl-class-name">OnInit</span>&nbsp;{</div><div class="tb-code-line">&nbsp;&nbsp;@<span class="tb-hl-function">ViewChild</span>(<span class="tb-hl-string">'editorContainer'</span>, {read: ElementRef,&nbsp;<span class="tb-hl-keyword">static</span>:&nbsp;<span class="tb-hl-boolean">true</span>})</div><div class="tb-code-line">&nbsp;&nbsp;editorContainer: ElementRef;</div><div class="tb-code-line"><br></div><div class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">ngOnInit</span>() {</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;editor =&nbsp;<span class="tb-hl-function">createEditor</span>();</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;editor.<span class="tb-hl-function">mount</span>(<span class="tb-hl-keyword">this</span>.editorContainer.nativeElement)</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;editor.onChange.<span class="tb-hl-function">subscribe</span>(() =&gt; {</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-builtin">console</span>.<span class="tb-hl-function">log</span>(editor.<span class="tb-hl-function">getContents</span>());</div><div class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div><div class="tb-code-line">&nbsp;&nbsp;}</div><div class="tb-code-line">}</div></div><span class="tb-pre-lang">TypeScript</span></pre>
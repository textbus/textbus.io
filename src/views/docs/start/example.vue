<script setup lang="ts">
import { useDocUpdate } from '@/hooks/use-doc-update';
import { ref } from 'vue';

const doc = ref<HTMLElement>()
useDocUpdate(doc)
</script>
<template>
  <div ref="doc">
    <h1>在框架中使用</h1>
<p>TextBus 不依赖前端的某个框架，意味着 TextBus 可以很轻松的在任意框架或项目中使用。如 Angular、Vue、React，或者是 jQuery 这样的传统项目。</p>
<h2>在 Vue 中使用</h2>
<p>vue2，请注意一定要在 mounted 生命周期内初始化，以确保可以获取到正确的 DOM 节点。</p><pre lang="HTML"><span style="width:2em" class="tb-code-line-number-bg"></span><span class="tb-code-content"><span class="tb-code-line">&lt;<span class="tb-hl-tag">template</span>&gt;</span><span class="tb-code-line">&nbsp;&nbsp;&lt;<span class="tb-hl-tag">div&nbsp;</span><span class="tb-hl-attr-name">ref</span>="<span class="tb-hl-attr-value">editorContainer</span>"&gt;&lt;/<span class="tb-hl-tag">div</span>&gt;</span><span class="tb-code-line">&lt;/<span class="tb-hl-tag">template</span>&gt;</span><span class="tb-code-line">&lt;<span class="tb-hl-tag">script</span>&gt;</span><span class="tb-code-line">import { createEditor } from '@textbus/editor';</span><span class="tb-code-line">import '@textbus/editor/bundles/textbus.min.css';</span><span class="tb-code-line"><br></span><span class="tb-code-line">export default {</span><span class="tb-code-line">&nbsp;&nbsp;mounted() {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;const editor = createEditor(this.$refs.editorContainer);</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;editor.onChange.subscribe(() =&gt; {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(editor.getContents());</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</span><span class="tb-code-line">&nbsp;&nbsp;}</span><span class="tb-code-line">}</span><span class="tb-code-line">&lt;/<span class="tb-hl-tag">script</span>&gt;</span></span><span class="tb-pre-lang">HTML</span></pre>
<p>Vue3，请注意一定要在 onMounted 生命周期内初始化，以确保可以获取到正确的 DOM 节点。</p><pre lang="HTML"><span style="width:2em" class="tb-code-line-number-bg"></span><span class="tb-code-content"><span class="tb-code-line">&lt;<span class="tb-hl-tag">template</span>&gt;</span><span class="tb-code-line">&nbsp;&nbsp;&lt;<span class="tb-hl-tag">div&nbsp;</span><span class="tb-hl-attr-name">ref</span>="<span class="tb-hl-attr-value">editorContainer</span>"&gt;&lt;/<span class="tb-hl-tag">div</span>&gt;</span><span class="tb-code-line">&lt;/<span class="tb-hl-tag">template</span>&gt;</span><span class="tb-code-line">&lt;<span class="tb-hl-tag">script</span>&gt;</span><span class="tb-code-line">import { defineComponent, ref, onMounted } from 'vue'</span><span class="tb-code-line">import { createEditor } from '@textbus/editor';</span><span class="tb-code-line">import '@textbus/editor/bundles/textbus.min.css';</span><span class="tb-code-line"><br></span><span class="tb-code-line">export default defineComponent({</span><span class="tb-code-line">&nbsp;&nbsp;setup() {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;const editorContainer = ref();</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;onMounted(() =&gt; {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const editor = createEditor(editorContainer.value);</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;editor.onChange.subscribe(() =&gt; {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(editor.getContents());</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;})</span><span class="tb-code-line"><br></span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;return {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;editorContainer</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</span><span class="tb-code-line">&nbsp;&nbsp;}</span><span class="tb-code-line">})</span><span class="tb-code-line">&lt;/<span class="tb-hl-tag">script</span>&gt;</span></span><span class="tb-pre-lang">HTML</span></pre>
<h2>在 React 中使用</h2>
<p>传统风格，请确保在 componentDidMount 生命周期内初始化，以确保可以获取到正确的 DOM 节点。</p><pre lang="TypeScript"><span style="width:2em" class="tb-code-line-number-bg"></span><span class="tb-code-content"><span class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;React&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'react'</span>;</span><span class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{ createEditor }&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@textbus/editor'</span>;</span><span class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;<span class="tb-hl-string">'@textbus/editor/bundles/textbus.min.css'</span>;</span><span class="tb-code-line"><br></span><span class="tb-code-line"><span class="tb-hl-keyword">export</span>&nbsp;<span class="tb-hl-keyword">class</span>&nbsp;<span class="tb-hl-class-name">EditorComponent</span>&nbsp;<span class="tb-hl-keyword">extends</span>&nbsp;<span class="tb-hl-class-name">React</span>.Component {</span><span class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">componentDidMount</span>() {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;editor =&nbsp;<span class="tb-hl-function">createEditor</span>(<span class="tb-hl-keyword">this</span>.refs.editorContainer);</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;editor.onChange.<span class="tb-hl-function">subscribe</span>(() =&gt; {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-builtin">console</span>.<span class="tb-hl-function">log</span>(editor.<span class="tb-hl-function">getContents</span>());</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</span><span class="tb-code-line">&nbsp;&nbsp;}</span><span class="tb-code-line"><br></span><span class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">render</span>() {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;(&lt;div ref=<span class="tb-hl-string">"editorContainer"</span>/&gt;);</span><span class="tb-code-line">&nbsp;&nbsp;}</span><span class="tb-code-line">}</span></span><span class="tb-pre-lang">TypeScript</span></pre>
<p>hooks 风格，请在 useEffect 内初始化，以确保能够获取到正确的 DOM 节点。</p><pre lang="TypeScript"><span style="width:2em" class="tb-code-line-number-bg"></span><span class="tb-code-content"><span class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{ useRef, useEffect }&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'react'</span>;</span><span class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{ createEditor }&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@textbus/editor'</span>;</span><span class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;<span class="tb-hl-string">'@textbus/editor/bundles/textbus.min.css'</span>;</span><span class="tb-code-line"><br></span><span class="tb-code-line"><span class="tb-hl-keyword">export</span>&nbsp;<span class="tb-hl-keyword">function</span>&nbsp;<span class="tb-hl-function">EditorDemo</span>() {</span><span class="tb-code-line"><br></span><span class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;editorContainer =&nbsp;<span class="tb-hl-function">useRef</span>()</span><span class="tb-code-line"><br></span><span class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">useEffect</span>(() =&gt; {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;editor =&nbsp;<span class="tb-hl-function">createEditor</span>(editorContainer.current);</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;editor.onChange.<span class="tb-hl-function">subscribe</span>(() =&gt; {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-builtin">console</span>.<span class="tb-hl-function">log</span>(editor.<span class="tb-hl-function">getContents</span>());</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</span><span class="tb-code-line">&nbsp;&nbsp;})</span><span class="tb-code-line"><br></span><span class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-keyword">return</span>&nbsp;(</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&lt;div ref={editorContainer}&gt;&lt;/div&gt;</span><span class="tb-code-line">&nbsp;&nbsp;)</span><span class="tb-code-line">}</span></span><span class="tb-pre-lang">TypeScript</span></pre>
<h2>在 Angular 中使用</h2>
<p>请在 ngOnInit 生命周期内初始化，以确保能获取到正确的 DOM 节点。</p><pre lang="TypeScript"><span style="width:2em" class="tb-code-line-number-bg"></span><span class="tb-code-content"><span class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{ Component, ViewChild, ElementRef, OnInit }&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@angular/core'</span>;</span><span class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;{ createEditor }&nbsp;<span class="tb-hl-keyword">from</span>&nbsp;<span class="tb-hl-string">'@textbus/editor'</span>;</span><span class="tb-code-line"><span class="tb-hl-keyword">import</span>&nbsp;<span class="tb-hl-string">'@textbus/editor/bundles/textbus.min.css'</span>;</span><span class="tb-code-line"><br></span><span class="tb-code-line">@<span class="tb-hl-function">Component</span>({</span><span class="tb-code-line">&nbsp;&nbsp;template: `</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&lt;div #editorContainer&gt;&lt;/div&gt;`</span><span class="tb-code-line">})</span><span class="tb-code-line"><span class="tb-hl-keyword">export</span>&nbsp;<span class="tb-hl-keyword">class</span>&nbsp;<span class="tb-hl-class-name">EditorComponent</span>&nbsp;<span class="tb-hl-keyword">implements</span>&nbsp;<span class="tb-hl-class-name">OnInit</span>&nbsp;{</span><span class="tb-code-line">&nbsp;&nbsp;@<span class="tb-hl-function">ViewChild</span>(<span class="tb-hl-string">'editorContainer'</span>, {read: ElementRef,&nbsp;<span class="tb-hl-keyword">static</span>:&nbsp;<span class="tb-hl-boolean">true</span>})</span><span class="tb-code-line">&nbsp;&nbsp;editorContainer: ElementRef;</span><span class="tb-code-line"><br></span><span class="tb-code-line">&nbsp;&nbsp;<span class="tb-hl-function">ngOnInit</span>() {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-keyword">const</span>&nbsp;editor =&nbsp;<span class="tb-hl-function">createEditor</span>(<span class="tb-hl-keyword">this</span>.editorContainer.nativeElement);</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;editor.onChange.<span class="tb-hl-function">subscribe</span>(() =&gt; {</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tb-hl-builtin">console</span>.<span class="tb-hl-function">log</span>(editor.<span class="tb-hl-function">getContents</span>());</span><span class="tb-code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</span><span class="tb-code-line">&nbsp;&nbsp;}</span><span class="tb-code-line">}</span></span><span class="tb-pre-lang">TypeScript</span></pre>
  </div>
</template>